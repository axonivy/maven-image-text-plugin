<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Rich Dialog Client Side Libraries</title><link href="css/book.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.78.0" name="generator"><link rel="home" href="index.html" title="Xpert.ivy 5.1"><link rel="up" href="ch20.html" title="Chapter&nbsp;20.&nbsp;Extensions"><link rel="prev" href="ch20s06.html" title="Provide your own process elements"><link rel="next" href="ch21.html" title="Chapter&nbsp;21.&nbsp;Configuration files"><script src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" language="JavaScript"></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Rich Dialog Client Side Libraries</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ch20s06.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter&nbsp;20.&nbsp;Extensions</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ch21.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ivy.extension.richdialog"></a>Rich Dialog Client Side Libraries</h2></div></div></div>
    
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.extension.richdialog.certificate"></a>Providing a Custom Certificate</h3></div></div></div>
        
        <p>This section shows you how to provide a custom certificate for your Rich Dialog
            clients.</p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            <p>When a client starts a Rich Dialog for the first time, a security information
                dialog box pops up showing information about the publisher of Xpert.ivy as well as
                the publisher's certificate. It may be confusing to the users of your application
                that a certificate from Xpert.ivy is displayed instead of a certificate of the
                implementor/vendor of the software they're using. This section shows you how to
                avoid this situation.</p>
        </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DBAF"></a>Install a Java Developer Kit (JDK)</h4></div></div></div>
        
        <p>Install a Java Developer Kit (JDK) version 1.6. You can download it from <a class="ulink" href="http://java.oracle.com">http://java.oracle.com</a>

                    </p>
    </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DBBC"></a>Creating a custom certificate</h4></div></div></div>
        
        <p>Use the <code class="code">keytool</code> from the previously installed JDK to create a custom
                certificate in a Java keystore. You may also want to sign your certificate by a
                certification authority. </p>
        <p>See the <a class="ulink" href="http://docs.oracle.com/javase/6/docs/technotes/tools/windows/keytool.html">JDK keytool documentation</a> for details.</p>
    </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DBCF"></a>Signing the Rich Dialog client libraries</h4></div></div></div>
        
        <p>To sign your custom Rich Dialog client extensions with a custom certificate, proceed
                as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                        <p>Configure the following properties:</p>
                        <p>
                                    <code class="code">keystore.file</code>, <code class="code">keystore.password</code>,
                                <code class="code">keystore.alias</code> and <code class="code">dir.jdk</code>
                                </p>
                        <p>in the file</p>
                        <p>
                                    <span class="italic">[Xpert.ivy Designer Installation Directory] /
                                clientlib / build.properties</span>
                                </p>
                        <p>Save your changes.</p>
                    </li><li class="listitem">
                        <p>Open the Ant build file </p>
                        <p>
                                    <span class="italic">[Xpert.ivy Designer Installation Directory] /
                                clientlib / build.xml</span>

                                </p>
                        <p>in Xpert.ivy Designer.</p>
                    </li><li class="listitem">
                        <p>Open the <span class="italic">Outline View</span> (Use the menu
                                <span class="italic">Window &gt; Show View &gt; Others... &gt; General &gt;
                                Outline</span>) </p>
                    </li><li class="listitem">
                        <p>In the <span class="italic">Outline View</span> select the root
                            entry in the tree. Right click to bring up the context menu and select
                                <span class="italic">Run As &gt; Ant Build</span> to run the Ant
                            build script (<em class="filename">build.xml</em>). The Console View will
                            show what the Ant build is doing and if there are errors during the
                            build, they will shown in the Console View as well. </p>
                    </li><li class="listitem">
                        <p>If the Ant build was successful then a new directory has been
                            created:</p>
                        <p>
                                    <span class="italic">[Xpert.ivy Designer Installation Directory] /
                                clientlib / customSigned</span>
                                </p>
                        <p>This directory now contains the new Rich Dialog client libraries which
                            have been signed with your certificate. </p>
                    </li></ol></div><p>
                    </p>
            <p>Xpert.ivy Designer will automatically use libraries that are located in this new
                directory when a Rich Application is started, i.e. the provided client side libraries
                will automatically be deployed to the client when simulating the next time.</p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                        <p>If an error message like <code class="code">jarsigner error: java.lang.RuntimeException: keystore load:
                        DerInputStream.getLength(): lengthTag=109, too big.</code> appears, try
                    setting the property <code class="code">keystore.type</code> accordingly to the type used in
                    the keystore.</p>

                    </div>
    </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DC4B"></a>Deploying custom signed Rich Dialog client libraries</h4></div></div></div>
            
            <p>To use the new custom signed client side extensions with another Xpert.ivy Designer
                or Server, simply copy the directory</p>
            <p>
                <span class="italic">Xpert.ivy Installation Directory / clientlib /
                    customSigned</span>

                    </p>
            <p>with all its files to a directory with the same name of another Xpert.ivy Designer
                or Server Installation Directory.</p>
        </div>
        <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DC5E"></a>Restrictions</h4></div></div></div>
            
            <p>
                </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                    <p>Upgrading Xpert.ivy Designer or Server may install a new version of the
                        standard client side libraries. If this is the case you have to resign your
                        custom Rich Dialog client side libraries so that they are compatible with the
                        newer standard client side libraries.</p>
                    <p>Xpert.ivy Designer will fall back to the standard client side libraries if
                        the custom signed client side library version does not match.</p>
                    <p>Xpert.ivy Server can only be started if the custom signed client side
                        libraries have exactly the same version as the standard client side
                        libraries.</p>
                </div><p>
                </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                    <p>All Rich Dialog client libraries located in the <span class="italic">clientlib/customSigned</span> directory must be signed by the same
                        certificate. Otherwise the Rich Dialog client will not start because of
                        security restrictions. </p>
                </div><p>
                </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                    <p>Because of performance optimizations (lazy loading) all client side
                        libraries located in the <span class="italic">clientlib/customSigned</span> directory must be signed together. Do
                        not mix new with previously signed libraries, otherwise the lazy loading
                        index will be inconsistent, leading to errors on the client side when
                        executing your application.</p>
                </div><p>
            </p>
        </div>
    </div>        
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.extension.richdialog.widgets"></a>Providing custom ULC Widgets</h3></div></div></div>
        
        <p>
            </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                <p>
                            <span class="bold"><strong>Development of custom ULC widgets is only permitted with
                    a valid <a class="ulink" href="http://www.canoo.com/webexperts/products/licences/">ULC developer license</a>. Licenses and more information about the
                    <a class="ulink" href="http://www.canoo.com/webexperts/products/ulc/">ULC (Ultra
                        Light Client) framework</a> can be obtained from <a class="ulink" href="http://www.canoo.com/">Canoo</a>. </strong></span>

                        </p>
            </div><p>
        </p>
        <p>Licensed ULC developers may contribute their own ULC extensions to an <span class="italic">Xpert.ivy</span> installation. This chapter explains how custom
            ULC widgets can be included by packing them into a <span class="italic">Xpert.ivy
                Rich Dialog Client Extension</span>.</p>
        <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DCB2"></a>Using custom ULC Widgets</h4></div></div></div>
            
            <p>To use a custom ULC Widget the following steps are necessary:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                        <p>The server side classes of the custom ULC Widget must be located in a
                            Xpert.ivy Project, so that they can be loaded on server side.</p>
                    </li><li class="listitem">
                        <p>The client side classes of the custom ULC Widget must be located in a
                            Xpert.ivy Rich Dialog Client Extension that is installed in the
                            directory <span class="italic">clientlib/extensions</span>.</p>
                    </li></ol></div><p>

                    </p>
        </div>
        <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DCCE"></a>Packing custom ULC Widgets to a Xpert.ivy Rich Dialog Client Extension</h4></div></div></div>
            
            <p>To pack custom ULC Widgets to a Xpert.ivy Rich Dialog Client Extension the
                following steps are necessary:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                        <p>The client side classes of the custom ULC Widgets must be available in
                            *.jar files.</p>
                    </li><li class="listitem">
                        <p>In the <span class="italic">Xpert.ivy Designer Installation
                                Directory / clientlib / extensions</span> directory create a new
                            sub directory with the name of your extension</p>
                    </li><li class="listitem">
                        <p>Create another sub directory called <span class="italic">clientLibs</span> inside the previously created extension sub
                            directory. The directory structure now looks like: </p>
                        <p>
                                    <span class="italic">Xpert.ivy Installation Directory / clientlib /
                                extensions / myExtension / clientLibs </span>

                                </p>
                        <p>In the example the extension is called <span class="italic">myExtension</span>.</p>
                    </li><li class="listitem">
                        <p>Copy the .jar files with the client side classes to the <span class="italic">clientLibs</span> sub directory created above.
                        </p>
                    </li><li class="listitem">
                        <p>Now, execute the same steps that are necessary to provide a customer
                            certificate. Instead of using the file <span class="italic">Xpert.ivy
                                Designer Installation Directory / clientlib / build.xml</span>
                            use the file <span class="italic">Xpert.ivy Designer Installation
                                Directory / clientlib / extensions / build.xml</span>. <a class="link" href="ch20s07.html#ivy.extension.richdialog.certificate" title="Providing a Custom Certificate">See section
                                above</a>. </p>
                    </li></ol></div><p>
                    </p>
            <p>If the Ant build is successful then a new directory was created:</p>
            <p>
                        <span class="italic">Xpert.ivy Designer Installation Directory / clientlib /
                    extensions / myExtension / signed</span>
                    </p>
            <p>It contains the jar files with the custom ULC Widgets signed with your
                certificate. The build will also create an extension configuration file if no such
                file is already available:</p>
            <p>
                        <span class="italic">Xpert.ivy Designer Installation Directory / clientlib /
                    extensions / myExtension / extension.any</span>

                    </p>
            <p>It contains information about your Xpert.ivy Rich Dialog Client Extension like
                title, vendor, homepage, etc.. But also the version of the extension. This version
                should be increased and the extension rebuilt every time the client side classes of
                the ULC Widget changes. </p>
            <p>Xpert.ivy Designer will automatically use the new created extension for the Rich
                Dialog clients.</p>
        </div>
        <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DD38"></a>Deploying Xpert.ivy Rich Dialog Client Extensions</h4></div></div></div>
            
            <p>To deploy a Xpert.ivy Rich Dialog Client Extension simple copy the extension
                directory (e.g. <span class="italic">myExtension</span>) that contains the
                    <span class="italic">extension.any</span> file and the <span class="italic">signed</span> directory inclusive the signed jars to the
                directory <span class="italic">clientlib / extensions</span> of another
                Xpert.ivy Designer or Server Installation.</p>
            <p>
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                    <p>It is possible to install multiple Xpert.ivy Rich Dialog Client Extensions
                        from different vendors with different certificates.</p>
                </div><p>
            </p>
        </div>
        <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N2DD5A"></a>Restrictions</h4></div></div></div>
            
            <p>
                </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                    <p>All Jar files of one extension must be signed by the same certificate.
                        Otherwise the Rich Dialog client will not start because of security
                        restrictions. </p>
                </div><p>
                </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                    <p>Because of performance optimizations (lazy loading) all jar files of one
                        extensions must be signed together. Do not mix new with previously signed
                        jar files, otherwise the lazy loading index is inconsistent.</p>
                </div><p>
            </p>
        </div>
    </div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N2DD70"></a>Troubleshooting Java Web Start Cache Problems</h3></div></div></div>
        
        <p>Rich Dialog Clients are using a technology called Java Web Start. Java Web Start
            caches all libraries it downloads from Xpert.ivy. This can cause conflicts if you are
            developing and do not increase the version of your client side classes if they change or
            if you changing certificates. The following command line tools can help to solve
            problems.</p>
        <p>Use the following command line to clean the cache of Java Web Start. This will remove
            all cached libraries from the cache:</p>
        <p>
                    <code class="code">javaws -uninstall</code>
                </p>
        <p>Use the following command to inspect the libraries that are cached by Java Web
            Start:</p>
        <p>
                    <code class="code">javaws -viewer</code>

                </p>
    </div>
</div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="ch20s06.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="ch20.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ch21.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">Provide your own process elements&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Chapter&nbsp;21.&nbsp;Configuration files</td></tr></table></div></body></html>