<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Data Caching</title><link href="css/book.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.78.0" name="generator"><link rel="home" href="index.html" title="Xpert.ivy 5.1"><link rel="up" href="ch19.html" title="Chapter&nbsp;19.&nbsp;Miscellaneous"><link rel="prev" href="ch19.html" title="Chapter&nbsp;19.&nbsp;Miscellaneous"><link rel="next" href="ch19s03.html" title="Eclipse Plugin Mechanism"><script src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" language="JavaScript"></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Data Caching</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ch19.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter&nbsp;19.&nbsp;Miscellaneous</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ch19s03.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ivy.data.caching"></a>Data Caching</h2></div></div></div>
        
        <p>Xpert.ivy offers a feature to store data temporarily into a <span class="emphasis"><em>data
                cache</em></span> in the server's memory. If you want to read data that stays
            unchanged for some time, you do not need to re-read the data every time you need to
            access it. If this data is read by long-running queries from a database or by calling a
            slow web service, you can gain a lot of performance by caching this data. The <a class="link" href="ch05s17.html" title="DB Step">database step</a> and the <a class="link" href="ch05s18.html" title="Web Service Call Step">web service step</a> natively
            support Data Caching (see the <a class="link" href="ch05.html#ivy.processmodels.elements.tabs.cache" title="Data Cache Tab">Data
                Cache Tab</a> for more information), for other data you can access the Data Cache
            API by IvyScript.</p>
        <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N2D56F"></a>Caches</h3></div></div></div>
            
            <p>Data that is cached is always stored in a data cache entry. This can be the result
                of a database query or of a web service call if you use the <a class="link" href="ch05.html#ivy.processmodels.elements.tabs.cache" title="Data Cache Tab">Data Cache Tab</a> on the
                    <a class="link" href="ch05s17.html" title="DB Step">database step</a> or on the
                    <a class="link" href="ch05s18.html" title="Web Service Call Step">web service step</a>.
                But you can also store any arbitrary object into a data cache entry by using the
                Public API. Entries are identified by a textual entry identifier.</p>
            <p>Entries are organised into groups. An entry always belongs to exactly one group,
                you cannot store the same entry in more than one group. In other words, the
                identifier of an entry must be unique in its group. If two entries in the same group
                have the same identifiers, then they are identical. Like entries, groups are as well
                identified by a textual group identifier. Use groups to store cache entries with
                similar data. This simplifies the invalidation of related data, see chapter <a class="link" href="ch19s02.html#ivy.data.caching.invalidation" title="Invalidation">invalidation</a> below. </p>
            <p>A <span class="italic">Data Cache</span> is a container for multiple
                groups. The identifier of a group must be unique in its data cache. If two groups in
                the same Data Cache have the same identifiers, then they are identical.</p>
            <p>
                </p><div class="mediaobject" align="center"><img src="images/Miscellaneous/data_cache.png" align="middle"></div><p>
            </p>
            <p>Data Caches always have a scope. A scope defines the boundaries of a specific Data
                Cache and as well the life cycle of the Data Cache depends on its scope:</p>
            <p>
                </p><div class="informaltable">
                    <table border="1"><colgroup><col width="70.0pt" class="c1"><col width="150.0pt" class="c2"><col width="150.0pt" class="c3"><col width="150.0pt" class="c4"><col width="150.0pt" class="c5"></colgroup><thead><tr><th>Scope</th><th>Type of cached data </th><th>Multiplicity of Data Cache</th><th>Data Cache life cycle start</th><th>Data Cache life cycle end</th></tr></thead><tbody><tr><td>Application</td><td>Global data that is related to the application </td><td>One per application</td><td>Application creation or server start</td><td>Application deletion or server stop</td></tr><tr><td>Environment</td><td>Global data that can vary for different environments, e.g. if
                                    you are using tenants or different configurations</td><td>One per application and environment</td><td>Environment creation or server start</td><td>Environment deletion, application deletion or server
                                    stop</td></tr><tr><td>Session</td><td>Data that is related to interactions within the actual
                                    session</td><td>One per session and environment</td><td>Session start</td><td>Session end</td></tr></tbody></table>
                </div><p>
            </p>
            <p>
                </p><div class="mediaobject" align="center"><img src="images/Miscellaneous/data_cache_scopes.png" align="middle"></div><p>
            </p>
            
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N2D621"></a>Access and Life Cycle</h3></div></div></div>
            
            <p>Cache entries and groups are created the first time they are accessed - the first
                time the process step with the data cache entry is executed - and they are destroyed
                when the scope of cache entries or groups reach the end of their life cycle. For the
                scope <span class="italic">Session</span> this is the logout of the user of
                the session or the session timeout, for the scopes  <span class="italic">Application</span> and <span class="italic">Environment</span> this
                is when the application is terminated or inactivated. </p>
            <p>Cache entries and groups are resolved by their identifiers. You can put different
                cache entries into one group by using the same group identifier for all entries. You
                can use the same data cache entry for multiple steps by using the same group and the
                same entry identifier for all entries. This is very useful for data that almost
                never changes, you can load the data into the cache once at the beginning of the
                scope's lifetime and read it from the cache from every step in all processes
                thereafter.</p>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.data.caching.invalidation"></a>Invalidation</h3></div></div></div>
            
            <p>In order to take into consideration changes in the data that is handled by the
                cache entries, it is possible to invalidate cache entries and as well whole groups
                either on request or after a configurable period of time. Thereby, invalidation
                means that only the value of the data cache entry is deleted, but not the entry
                itself. The next time a step referring to this data cache entry is executed, the
                value of the data cache is loaded again. </p>
            <p>You can invalidate an entry, a group and even the whole cache explicitly in the
                    <a class="link" href="ch05.html#ivy.processmodels.elements.tabs.cache" title="Data Cache Tab">Data Cache Tab</a> of
                inscription masks of the process steps that use data caching or by an IvyScript API
                call. Otherwise you may specify a period as a lifetime or fixed time of day for
                invalidation. The lifetime period starts when the group/entry is loaded the first
                time. A background job is responsible to invalidate entries/groups when their
                lifetime has ended. If you set a fixed invalidation time, the corresponding entry or
                group is invalidated once per day at that time. By invalidating a group, all its
                contained entries are invalidated and similarly invalidating the whole data cache
                does invalidate all groups and therefore as well all entries. </p>
            <div class="sidebar"><div class="titlepage"><div><div><p class="title"><b>How Data Caching works on a Xpert.ivy Cluster Server</b></p></div></div></div>
                
                <p>A Xpert.ivy Cluster Server consists of multiple server instances (nodes) that
                    are running on different machines.</p>
                <p>In a Xpert.ivy Cluster Server the <span class="italic">Application</span> and <span class="italic">Environment</span>
                    data caches will be created on each node independently. However, if a data cache
                    is invalidated on one cluster node either by timeout or explicitly, then it will
                    be automatically invalidated on all other cluster nodes as well. </p>
                <p>On the other hand, <span class="italic">Session</span> data caches will
                    only be created on one node because sessions are always bound to a specific node
                    in the cluster.</p>
            </div>
        </div>
    </div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="ch19.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="ch19.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ch19s03.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">Chapter&nbsp;19.&nbsp;Miscellaneous&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Eclipse Plugin Mechanism</td></tr></table></div></body></html>