<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>IvyScript-Java Integration</title><link href="css/book.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.78.0" name="generator"><link rel="home" href="index.html" title="Xpert.ivy 5.1"><link rel="up" href="ch07.html" title="Chapter&nbsp;7.&nbsp;IvyScript"><link rel="prev" href="ch07s05.html" title="IvyScript Reference"><link rel="next" href="ch08.html" title="Chapter&nbsp;8.&nbsp;Content Management"><script src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" language="JavaScript"></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">IvyScript-Java Integration</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ch07s05.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter&nbsp;7.&nbsp;IvyScript</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ch08.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ivy.ivyscript.javaintegration"></a>IvyScript-Java Integration</h2></div></div></div>
		
		<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.ivyscript.reference.javamethods"></a>Call Java methods and fields</h3></div></div></div>
			
			<p>You can easily write own Java classes and use it directly in IvyScript. You can call static
				methods and fields from Java classes (e.g. <code class="code">java.lang.Math</code>). You have to
				address the class with the qualified name or use import statements. If a Java method
				has no return parameter (void) then the called object of the method is returned
				(e.g. a call to <code class="code">user.setName(...)</code> returns object
				<code class="code">user</code>).</p><pre class="screen">import java.lang.Math;

Number r = Math.random();
Number pi = Math.PI;

out.n= r*pi;</pre><p>
                </p>
		</div>
		<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.ivyscript.reference.nullchecks"></a>Working with different Date, Time and DateTime implementations</h3></div></div></div>
			
			<p>When working with Databases and Web Services in Xpert.ivy, then different
				implementations of Date, Time and combined Date-Time information are encountered
				(e.g. <code class="code">java.util.Date</code>, <code class="code">java.sql.Date</code>, Axis Time, etc). To
				complicate matters further, some of those implementations are - for historical
				reasons - mutable (e.g. <code class="code">java.util.Date</code>) which is from todays'
				perspective an unwelcome behavior. This has been remedied by some other
				implementations.</p>
			<p>To facilitate working with values of those different types, IvyScript will
					<span class="emphasis"><em>always</em></span> convert them to the corresponding,
					<span class="emphasis"><em>immutable</em></span> IvyScript base types whenever such values are
				encountered, according to the following table:</p>
			<div class="table"><a name="N26224"></a><p class="title"><b>Table&nbsp;7.5.&nbsp;Automatic conversion of foreign Date / Time values</b></p><div class="table-contents">
				
				<table summary="Automatic conversion of foreign Date / Time values" border="1"><colgroup><col><col></colgroup><thead><tr><th>Java type</th><th>Ivy type</th></tr></thead><tbody><tr><td>Axis1 <code class="code">Time</code>
                                </td><td>Ivy <code class="code">Time</code>
                                </td></tr><tr><td>Axis2 <code class="code">Time</code>
                                </td><td>Ivy <code class="code">Time</code>
                                </td></tr><tr><td>Axis1 <code class="code">Duration</code>
                                </td><td>Ivy <code class="code">Duration</code>
                                </td></tr><tr><td>Axis2 <code class="code">Duration</code>
                                </td><td>Ivy <code class="code">Duration</code>
                                </td></tr><tr><td>JDBC (SQL) <code class="code">Timestamp</code>
                                </td><td>Ivy <code class="code">DateTime</code>
                                </td></tr><tr><td>JDBC (SQL) <code class="code">Date</code>
                                </td><td>Ivy <code class="code">Date</code>
                                </td></tr><tr><td>JDBC (SQL) <code class="code">Time</code>
                                </td><td>Ivy <code class="code">Time</code>
                                </td></tr><tr><td>Java <code class="code">Date</code>
                                </td><td>Ivy <code class="code">DateTime</code>
                                </td></tr></tbody></table>
			</div></div><br class="table-break">
			<p>The automatic conversion into IvyScript types takes place transparently. The
				developer should therefore only think in terms of the IvyScript <code class="code">Date</code> /
					<code class="code">Time</code> types. No explicit conversion has to be made, neither when
				reading nor when writing those types.</p>
			<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
				<p>As a general rule, <span class="emphasis"><em>do not create any variables or objects of foreign
						(i.e. Java) Date / Time types inside IvyScript</em></span> . Although a
					statement such as
					</p><pre class="screen">
java.util.Date myDate = new java.util.Date();
			</pre><p>is valid and
					permitted in IvyScript, the actual type of the <span class="emphasis"><em>myDate</em></span>
					object will aways be IvyScript <code class="code">DateTime</code>, due to the
					auto-conversion. This can lead to confusion.</p>
			</div>
			<p>When trying to find out if date or time values are <span class="emphasis"><em>null</em></span> or
				not initialized, developers should always use the <code class="code">is initialized</code>
				operator rather than testing against <span class="emphasis"><em>null</em></span>:
				</p><pre class="screen">
// recommended style
if (person.birthday is initialized) ...
if (in.lunchTime is initialized) ...
if (schedule.appointment is initialized) ...

// unsafe style, not recommended
if (person.birthday != null) ...
if (in.lunchTime != null) ...
if (schedule.appointment != null) ...
				</pre><p>
                </p>
		</div>
		<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.ivyscript.reference.autocast"></a>Auto casting rules</h3></div></div></div>
			
			<p>IvyScript supports auto casting between the most important Java types and IvyScript
				types. This means, that you no longer have to use the toXyz() methods on your
				IvyScript values. Instead you can directly assign IvyScript types to Java types and
				vice versa. This also holds for lists (IvyScript) and arrays (Java). </p>
			<p>The following auto-casting rules are supported by IvyScript (bidirectional):</p>
			<div class="table"><a name="N262EE"></a><p class="title"><b>Table&nbsp;7.6.&nbsp;Auto casting rules</b></p><div class="table-contents">
				
				<table summary="Auto casting rules" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Java type</th><th>
							</th><th>Ivy type</th></tr></thead><tbody><tr><td>Axis1 <code class="code">Time</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Time</code>
                                </td></tr><tr><td>Axis2 <code class="code">Time</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Time</code>
                                </td></tr><tr><td>Axis1 <code class="code">Duration</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Duration</code>
                                </td></tr><tr><td>Axis2 <code class="code">Duration</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Duration</code>
                                </td></tr><tr><td>JDBC (SQL) <code class="code">Timestamp</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">DateTime</code>
                                </td></tr><tr><td>JDBC (SQL) <code class="code">Date</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Date</code>
                                </td></tr><tr><td>JDBC (SQL) <code class="code">Time</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Time</code>
                                </td></tr><tr><td>Java <code class="code">Date</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">DateTime</code>
                                </td></tr><tr><td>Java <code class="code">Date</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Date</code>
                                </td></tr><tr><td>Java <code class="code">Date</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Time</code>
                                </td></tr><tr><td>
                                    <code class="code">byte[]</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">Binary</code>
                                </td></tr><tr><td>
                                    <code class="code">aType[]</code>
                                </td><td> &lt;-&gt;</td><td>Ivy <code class="code">List&lt;aType&gt;&gt;</code>

                                </td></tr></tbody></table>
			</div></div><br class="table-break">
		</div>
	</div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="ch07s05.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="ch07.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ch08.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">IvyScript Reference&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Chapter&nbsp;8.&nbsp;Content Management</td></tr></table></div></body></html>