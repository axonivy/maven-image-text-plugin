<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Xpert.ivy Extension Mechanism</title><link href="css/book.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.78.0" name="generator"><link rel="home" href="index.html" title="Xpert.ivy 5.1"><link rel="up" href="ch20.html" title="Chapter&nbsp;20.&nbsp;Extensions"><link rel="prev" href="ch20s02.html" title="New Bean Class Wizard"><link rel="next" href="ch20s04.html" title="Build an Xpert.ivy extension bundle (Eclipse plugin)"><script src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" language="JavaScript"></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Xpert.ivy Extension Mechanism</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ch20s02.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter&nbsp;20.&nbsp;Extensions</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ch20s04.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ivy.extension.ivy"></a>Xpert.ivy Extension Mechanism</h2></div></div></div>
        
        <p>There are other ways to extend Xpert.ivy than with the process elements mentioned
            above. You may want to start your own code during the startup of the Xpert.ivy Server,
            for example to connect to your ERP system. You may have a product that administrates
            your users and you want to use the same users also in Xpert.ivy. For such kind of
            extension or integration Xpert.ivy provides the Xpert.ivy extension mechanism.</p>
        <p>Xpert.ivy provides some points in its code where 3rd party code can be executed. These
            points are called extension points. Each extension point defines an interface that
            implementors (extensions) of the extension point have to implement. Because Xpert.ivy
            has to know what extensions are available for a given extension point, a extension class
            must be configured as an extension either using an <em class="filename">*.extensions</em>
            file or using the Eclipse plugin extension point mechanism (See <a class="ulink" href="http://www.eclipse.org">Eclipse</a> documentation for more details).</p>
        <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
            <p>The Eclipse plugin extension point mechanism can only be used in Xpert.ivy
                Designer to configure a extension for an Xpert.ivy extension point. Since Xpert.ivy
                Server is not build upon an Eclipse runtime the extension point mechanism of Eclipse
                does not work with the server.</p>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N2D8C9"></a>Extensions File</h3></div></div></div>
            
            <p>An extension class can be configured as an extension for a Xpert.ivy extension
                point by creating a <em class="filename">*.extensions</em> file and putting it into the
                directory <em class="filename">configuration/extensions</em> inside a Xpert.ivy Designer
                or Server installation directory. The <em class="filename">*.extensions</em> file is an
                XML file that must fulfil the following XML schema:</p><div class="figure"><a name="N2D8D9"></a><p class="title"><b>Figure&nbsp;20.2.&nbsp;Extension File XML Schema</b></p><div class="figure-contents">
                    
                    <div class="mediaobject"><img src="images/Extensions/extensionSchema.png" alt="Extension File XML Schema"></div>
                </div></div><p><br class="figure-break">
                </p>
            <p>The schema allows to define multiple extension points in a singe file. For each
                extension point multiple extensions can be specified. An extension point is
                identified by the interface name and the bundle in which the interface is defined.
                An extension is identified by the class name that implements the extension point
                interface and its bundle in which the class is located.</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                <p>There is an <em class="filename">*.extensions</em> file already in the
                        <em class="filename">configuration/extensions</em> directory called
                        <em class="filename">ivy.extensions</em>. It is possible to add your extension
                    configurations to the <em class="filename">ivy.extensions</em> file. Note, that it is
                    not a good practice to do so, because the <em class="filename">ivy.extensions</em>
                    file may be overwritten if you upgrade to a new version. Best practice is to
                    write your own <em class="filename">company.extensions</em> file.</p>
            </div>
            <div class="sidebar"><div class="titlepage"><div><div><p class="title"><b>Bundle</b></p></div></div></div>
                
                <p>You may wonder why you have to specify a bundle for extension points and
                    extensions. The reason for this is that Xpert.ivy Designer runs inside a Eclipse
                    runtime which is based on an OSGI environment. In a OSGI environment each line
                    of code is located inside a bundle. A class inside a bundle can only load
                    classes of its own bundle or from bundles that its own bundle depends on. A
                    bundle that has to load an extension class cannot be dependent of the bundle the
                    extension class is located in, because it does not know them. Therefore
                    Xpert.ivy uses a special mechanism to load the extension class. It first gets a
                    reference to the bundle the extension class is located in. This can be done by
                    specifying the name of the extension bundle. Then the extension class can be
                    loaded by calling a method on the bundle itself. </p>
                <p>The bundle specification is ignored on the Xpert.ivy Server because it is not
                    running in an OSGI environment.</p>
            </div>
            <p>The following part shows the <em class="filename">ivy.extensions</em> file to give you
                an idea how an <em class="filename">*.extensions</em> file looks like:</p>
            <pre class="screen">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;extensionPoints&gt;
  &lt;extensionPoint 
        interface="ch.ivyteam.ivy.security.IExternalSecuritySystemProvider" 
        bundle="ch.ivyteam.ivy.security"&gt;
    &lt;extension bundle="ch.ivyteam.ivy.security" 
        class="ch.ivyteam.ivy.security.internal.ivy.IvySecuritySystemProvider"/&gt;
    &lt;extension bundle="ch.ivyteam.ivy.security" 
        class="ch.ivyteam.ivy.security.internal.ads.MicrosoftActiveDirectorySecuritySystemProvider"/&gt;
    &lt;extension bundle="ch.ivyteam.ivy.security" 
        class="ch.ivyteam.ivy.security.internal.nds.NovellDirectoryServiceSecuritySystemProvider"/&gt;
  &lt;/extensionPoint&gt;
&lt;/extensionPoints&gt;</pre>
            <p>In this file three extensions for the extension point
                IExternalSecuritySystemProvider are configured.</p>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N2D921"></a>Installation</h3></div></div></div>
            
            <p>You have to do the following steps to install your extensions in Xpert.ivy Designer:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                        <p>Stop Xpert.ivy Designer.</p>
                    </li><li class="listitem">
                        <p>Copy your plugin (bundle) that contains your extension classes to the
                                <em class="filename">plugins</em> directory inside the Xpert.ivy Designer
                            installation directory.</p>
                    </li><li class="listitem">
                        <p>If you do not use the Eclipse plugin extension point mechanism to
                            configure your extensions, copy your <em class="filename">*.extensions</em>
                            file with the configuration of your extensions to the
                                <em class="filename">configuration/extensions</em> directory inside the
                            Xpert.ivy Designer installation directory.</p>
                    </li><li class="listitem">
                        <p>Restart Xpert.ivy Designer.</p>
                    </li></ol></div><p>
                </p>
            <p>To install your extensions on the Xpert.ivy Server follow these steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                        <p>Stop Xpert.ivy Server.</p>
                    </li><li class="listitem">
                        <p>Copy your jar file that contains your extensions class(es) into the
                                <em class="filename">lib/shared</em> directory inside the Xpert.ivy
                            Server installation directory.</p>
                    </li><li class="listitem">
                        <p>Copy your <em class="filename">*.extensions</em> file with the
                            configuration of your extensions to the
                                <em class="filename">configuration/extensions</em> directory.</p>
                    </li><li class="listitem">
                        <p>Restart Xpert.ivy Server.</p>
                    </li></ol></div><p>
                </p>
        </div>
    </div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="ch20s02.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="ch20.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ch20s04.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">New Bean Class Wizard&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Build an Xpert.ivy extension bundle (Eclipse plugin)</td></tr></table></div></body></html>