<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Html Dialogs</title><link href="css/book.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.78.0" name="generator"><link rel="home" href="index.html" title="Xpert.ivy 5.1"><link rel="up" href="ch09.html" title="Chapter&nbsp;9.&nbsp;User Dialogs"><link rel="prev" href="ch09.html" title="Chapter&nbsp;9.&nbsp;User Dialogs"><link rel="next" href="ch09s03.html" title="Rich Dialogs"><script src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" language="JavaScript"></script></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Html Dialogs</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ch09.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter&nbsp;9.&nbsp;User Dialogs</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ch09s03.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ivy.htmldialogs"></a>Html Dialogs</h2></div></div></div>
    
    <p>A Html Dialog (in the following abbreviated as HD) is one of two possibilities to
        implement a User Dialog Component. HDs are implemented using the Java Server Faces
        technology from <a class="ulink" href="http://www.oracle.com/technetwork/java/javaee/javaserverfaces-139869.html">Oracle</a>
    </p>
    <p>This means, that the view of a HD is defined with the means of a XHTML document and that
        it is displayed in a web browser. </p>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.primefaces"></a>PrimeFaces JSF Component Library</h3></div></div></div>
        
        <p>Xpert.ivy is bundled with the JSF component library<a class="ulink" href="http://primefaces.org/">PrimeFaces</a>, an open source JSF component library developed by Prime
            Teknoloji. It provides a collection of mostly visual components (widgets). These can be
            used by JSF programmers in addition to the small set of basic components that ship with
            the core JSF platform. A very good starting point to learn more about PrimeFaces can be
            found in the <a class="ulink" href="http://www.primefaces.org/showcase/ui/home.jsf">PrimeFaces Showcase</a>
        </p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
            <p>The <span class="bold"><strong>Html Dialog Editor</strong></span> supports PrimeFaces during
                design time. This means that you can profit from code completion support, structured
                properties in the property view and a graphical representation in the preview part
                for all PrimeFaces widgets. </p>
        </div>
        <p>The elements of the PrimeFaces library are introduced with the <code class="code">&lt;p:&gt;</code>
            namespace on your XHTML page. In addition also the <span class="bold"><strong>primefaces-extension</strong></span>
                    <code class="code">&lt;pe:</code> and <span class="bold"><strong>primefaces-mobile</strong></span>
            <code class="code">&lt;pm:</code> widget libraries are included in the Xpert.ivy installation. </p>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            <p>It is also possible to install and use additional JSF libraries. To do so you copy
                the concerning .jar file into the folder <span class="bold"><strong>/webapps/ivy/WEB-INF/lib</strong></span> of Xpert.ivy Designer and Xpert.ivy Server
                respectively. Then you have to add a namespace attribute <span class="bold"><strong>xmlns:xx</strong></span> on your html pages to use the widgets.</p>
        </div>
    </div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.themes"></a>Themes</h3></div></div></div>
        
        <p>With themes the visual appearance of the application such as the color scheme and the
            decoration of components can be changed. PrimeFaces comes with a number of predefined
            themes where you can choose from.  Or you can create your own theme using the theme
            generator tool jQuery ThemeRoller. To learn more about PrimeFaces themes, the web site
                <a class="ulink" href="http://www.primefaces.org/themes.html">PrimeFaces Themes</a>  is the right
            starting point: </p>
        <p>For Xpert.ivy the theme called <span class="bold"><strong>xpertivy-theme</strong></span> has
            been designed and is configured in Xpert.ivy Designer and Server as default. However,
            you can easily configure another default theme following these steps: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                    <p>Copy your themeXY.jar file into the folder <span class="bold"><strong>/webapps/ivy/WEB-INF/lib</strong></span> of Xpert.ivy Designer and Xpert.ivy
                        Server respectively</p>
                </li><li class="listitem">
                    <p>Edit the theme setting parameter <code class="code">primefaces.THEME</code> in the file
                            <span class="bold"><strong>/webapps/ivy/WEB-INF/web.xml</strong></span>
                    </p>
                </li><li class="listitem">
                    <p>Restart Xpert.ivy</p>
                </li></ul></div><p>

                </p>
        <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
            <p>PrimeFaces contains a nice component called <span class="bold"><strong>ThemeSwitcher</strong></span> that enables users to switch between installed themes
                on-the-fly without full page refresh.</p>
        </div>
        <p></p>
    </div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.dataandlogic"></a>Html Dialog Data Binding and Event Mapping</h3></div></div></div>
    
    <p>A Html Dialog follows the model-view-controller pattern of the Xpert.ivy <a class="link" href="ch09.html#ivy.userdialogs.concept" title="User Dialog Concept">User Dialog concept</a>. So part of an implemented
        HD is a data class (the model) whose data fields can be bound to widget properties of the
        view. To define such a binding, Xpert.ivy provides the special object <span class="bold"><strong>data</strong></span>.</p>
    <p>On the other hand, the controller part of a Html Dialog is implemented by a series of UI
        processes that can be mapped to events on the view such as mouse clicks. To define such an
        event mapping, Xpert.ivy provides the keyword <span class="bold"><strong>logic</strong></span> to call
        an event process or a method process in the logic.</p>
    <p>Look at the following small code sample of a form with a mapped data attribute on an input
        text field and a button with a bound event process:</p>
    <pre class="screen">
  &lt;h:body&gt;
    &lt;h3&gt;My JSF Form&lt;/h&gt;
    &lt;h:form id="myForm"&gt;
        &lt;p:outputLabel value="#{ivy.cms.co('/labels/street')}" for="street" /&gt;
        &lt;p:inputText value="#{data.address.street}" id="street" /&gt;
        &lt;p:commandButton value="#{ivy.cms.co('/labels/submit')}" actionListener="#{logic.submit}"/&gt;
    &lt;/h:form&gt;
  &lt;/h:body&gt;
    </pre>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.ajaxandrest"></a>Ajax Method Call API</h3></div></div></div>
    
    <p>Methods of a Html Dialog can be called with JavaScript through a REST like Interface. This
		Ajax method call API of Xpert.ivy can be used to integrate JavaScript libraries like D3,
		jQuery or your own JavaScript scripts. See the Ajax Method Call Demo in the Html Dialog Demo
		Project:</p><pre class="screen">		&lt;script type="text/javascript"&gt;
				// jQuery is used to intercept the click on the Button with id #hello
				$("#hello").click(function(){

						// The ivyajaxapi.js script provides the logic object, 
						// which contains a function for each method available on the dialogs interface.
						// If you would like to use the REST API in a more advanced way or without jQuery, 
						// have a look at the generated ivyajaxapi.js script to see how the REST API is used.
						logic.helloWorld( 
							
							// The first parameter is a data structure, which represents the list of parameters
							{"name": "World"},
							
							// The second parameter is a function, which is called on a successful response.
							function(returnData)
							{
								// returnData is a JavaScript Object containing one field for each Method return value.
								// returnData.result accesses the return value named result.
								$("#result").html(returnData.result);
							});
				});
		&lt;/script&gt;</pre><p>
                </p>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.editors.htmldialog"></a>Html Dialog Editor</h3></div></div></div>
    
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ivy.editors.htmldialog.overview"></a>Overview</h4></div></div></div>
        
        <p>The Html Dialog editor (also called <span class="italic">Xhtml Editor</span>)
            allows to implement the view of a Html Dialog (i.e. the <span class="italic">JSF
                view</span>). The Html Dialog editor consists of two tabs, Design and Preview.
            In the Design page you can design and edit the view where as the Preview shows you a
            rough preview of the current state of the view, depending on your device and browser the
            real output can be much different than shown in the preview.</p>
        <div class="mediaobject"><img src="images/HtmlDialogs/xhtmleditor.png"></div>
    </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ivy.editors.htmldialog.accessibility"></a>Accessibility</h4></div></div></div>
        
        <p>Xpert.ivy Project Tree -&gt; double click on the <span class="italic">View</span>
            node of a Html Dialog: </p><div class="mediaobject"><img src="images/HtmlDialogs/xhtmleditor_projecttreenode.png"></div><p>
                    </p>
    </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ivy.editors.htmldialog.previewarea"></a>Design Tab</h4></div></div></div>
        
        <p>In the Design tab the view can be manipulated either in a graphical way in the Design
            page or in a textual way in the Source page. The third element is a palette with drawers
            for graphical and non-graphical JSF components and widgets that can be used in views.
            Such components/widgets can be dragged from the various palette drawers and then be
            dropped onto both the Design Page or onto the Source Page. As well the rearrangement of
            already positioned widgets is possible in both Pages. </p>
        <p>Both pages are linked together, so a change in one page is automatically reflected in
            the other one, e.g. if I change the text of a <span class="emphasis"><em>h1</em></span> HTML element in
            the Source Page then the Design Page is immediately updated and shows the new text. Or
            when I drag and drop a PrimeFaces widget on the Design Page, then the corresponding
            source code is automatically added in the correct part of the Source Page.</p>
        <p>There are options to arrange the two Pages in horizontal or vertical panes or to show
            only one of the two pages.</p>
        <div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="N270AE"></a>Design Page</h5></div></div></div>
            
        
        <p>The graphical way in the Design Page of the Html Dialog editor allows to compose a
            Html Dialog view in a <span class="italic">graphical</span> mode by selecting an
            UI element from the palette and positioning it on the view. Similarly, already
            positioned elements can be dragged to another position on the view, simply by selecting
            and dragging them with the mouse. </p>
        <div class="mediaobject"><img src="images/HtmlDialogs/xhtmleditor_design.png"></div>
        <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            <p>The Design Page is not a true WYSIWYG editor but a preview mainly used for
                navigation. If you click on an element on the Design Page the corresponding code is
                selected in the Source Page. </p>
        </div>
        </div>
    
    <div class="sect4"><div class="titlepage"><div><div><h5 class="title"><a name="N270CA"></a>Source Page (Code)</h5></div></div></div>
        
        <p>For each element that has been dropped on the view the corresponding code is generated
            in the source. Alternatively you can use the auto completion support in the source
            editor. Just enter the first letter(s) of a valid code fragment and a selection list of
            matching elements pops up. </p>
        <div class="mediaobject"><img src="images/HtmlDialogs/xhtmleditor_source.png"></div>
        <div class="sect5"><div class="titlepage"><div><div><h6 class="title"><a name="N270DB"></a>Content assist (Ctrl+space)</h6></div></div></div>
            
            <p>In addition to the auto completion support you get further assistance for writing
                    expressions if you press Ctrl+Space on an expression to get a pop-up with
                    context aware list of proposed code fragments to select from.</p>
            <div class="mediaobject"><img src="images/HtmlDialogs/htmldialogeditor_contentassist.png"></div>
        </div>
        <div class="sect5"><div class="titlepage"><div><div><h6 class="title"><a name="N270ED"></a>Quick Fix (Ctrl+1)</h6></div></div></div>
            
            <p>Also Quick Fixes were added to support the automatic creation of events, methods
                and data attributes on the current Html Dialog. Simply press Ctrl+1 on a <span class="bold"><strong>logic</strong></span> or <span class="bold"><strong>data</strong></span> expression
                respectively.</p>
            <div class="mediaobject"><img src="images/HtmlDialogs/htmldialogeditor_quickfix.png"></div>
        </div>
    </div>
    </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N27109"></a>Properties View</h4></div></div></div>
        
        <p>Together with the Html Dialog Editor you will want to use the Eclipse properties view
            to define attributes for the UI elements of your dialog. Simply switch to the <span class="bold"><strong>Html Dialog Perspective</strong></span> that will open the properties view
            aside of the Html Dialog Editor.</p>
        <div class="mediaobject"><img src="images/HtmlDialogs/xhtmleditor_propertiesview.png"></div>
    </div>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.templates"></a>Html Dialog Templates</h3></div></div></div>
    
    <p>A template is the concept of a master page that defines the basic layout and the common
        content for a number of similar dialogs. With <span class="bold"><strong>&lt;ui:insert</strong></span>
        tags some areas of the page can be depicted to be overwritten and filled by dialogs that
        will make use of the template master page. Note, that a template is the definition for a
        shared and common used view, not the reuse of a whole Html Dialog. For embedding Html
        Dialogs within other Html Dialogs the Html Dialog component framework is provided.</p>
    <p>A template (.xhtml file) should be stored in the <a class="link" href="ch10s03.html" title="HTML content in the Web Content Folder">webContent</a> folder of the project. </p>
    <div class="mediaobject"><img src="images/HtmlDialogs/htmldialog_templates.png"></div>
    <p>This code fragment is from a template master page that defines an insert area:</p>
    <pre class="screen">        ... common content        
        &lt;ui:insert name="center"&gt;
            ... area to be filled individually
        &lt;/ui:insert&gt; 
        ... common content       
    </pre>
    <p>Dialog pages that derive form a template page have to implement and fill the inserts that
        are defined on the template master page. First set the template master document with a
            <span class="bold"><strong>&lt;ui:composition</strong></span> tag and then use <span class="bold"><strong>&lt;ui:define</strong></span> tag to fill the inserts from the template. </p>
    <pre class="screen">
        &lt;ui:composition template="/myPageTemplate.xhtml"&gt;

        &lt;ui:define name="center"&gt;
            ...  my content in this area
        &lt;/ui:define&gt;
        &lt;/ui:composition&gt;
    </pre>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.components"></a>Html Dialog Components</h3></div></div></div>
    
    <p>To support a component oriented UI design, Html Dialogs can be embedded into others. A
        Html Dialog is either a page or a component. A page plays represents the whole dialog that
        is finally displayed. Therefore only a page can be opened by a User Dialog process element.
        On the other hand a component can be embedded into other HTML dialogs, whether this is a
        page or another component. Both, a page and a component do have their own model (data class)
        and controller (logic). </p>
    <div class="mediaobject"><img src="images/HtmlDialogs/htmldialog_component.png"></div>
    <p>A Html Dialog component consists of two parts, an interface and the implementation. The
        interface is constituted by a <code class="code">&lt;cc:interface componentType="IvyComponent"&gt;</code>
        tag and is followed by an optional list of component attributes. The implementation part
        starts with a <code class="code">&lt;cc:implementation&gt;</code> tag and the component attributes can be
        accessed with the expression <code class="code">cc.attrs.attributeName</code>

                </p>
    <p>The following code fragment defines an example Html Dialog component:</p>
    <pre class="screen">
        &lt;cc:interface componentType="IvyComponent"&gt;
            &lt;cc:attribute name="caption" /&gt;
        &lt;/cc:interface&gt;
        &lt;cc:implementation&gt;
            &lt;p:fieldset legend="Address Component"&gt;
                &lt;h:outputLabel value="#{cc.attrs.caption}" /&gt;
                &lt;h:panelGrid columns="2"&gt;
                    &lt;p:outputLabel value="Street" for="street" /&gt;
                    &lt;p:outputLabel value="Country" for="country" /&gt;
                    &lt;p:inputText value="#{data.address.street}" id="street" /&gt;
                    &lt;p:inputText value="#{data.address.country}" id="country" /&gt;
                &lt;/h:panelGrid&gt;
            &lt;/p:fieldset&gt;
        &lt;/cc:implementation&gt;
    </pre>
    <p>Insert a Html Dialog component with a <code class="code">&lt;ic:componentName</code> tag into another
        Html Dialog. Optionally you can define the start method that should be used to start the
        embedded component with the attribute <code class="code">startMethod</code>. If you do not define the
        start method, then a default start method (name must be "start") is assumed and will be
        used. Parameters of the start method can be defined by adding them as named attributes.
        Xpert.ivy will map parameters by name, i.e. an attribute of the tag will be mapped to the
        start method parameter with the same name. Furthermore you can set the component attributes
        that you defined in the interface of the component by simply adding them as attributes of
        the tag too.</p>
    <p>
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            <p>You can not override start methods. So do not use multiple start methods with the
                same name but different parameter lists. Xpert.ivy can currently not find the
                correct start method according to the given parameters.</p>
        </div><p>
    </p>
    <p>See the following code fragment that inserts a Html Dialog component. The start method
            <code class="code">start(data.person.BillingAddress:address)</code> will be used, the current value
        of the data class property <code class="code">billingAddress</code> will be used as parameter for the
        start method and the component attribute <code class="code">caption</code> will be set to the value
        "Billing Address"</p>
    <pre class="screen">
    &lt;h:panelGrid columns="2"&gt;
        &lt;ic:ch.ivyteam.htmldialog.demo.component.AddressComponent
            startMethod="start" address="#{data.person.billingAddress}"
            caption="Billing Address"&gt;
        &lt;/ic:ch.ivyteam.htmldialog.demo.component.AddressComponent&gt;
    &lt;/h:panelGrid&gt;
    </pre>
    <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
        <p>In the <span class="bold"><strong>Html Dialog Editor</strong></span>you have pretty nice tool
            support for inserting components. You can drag and drop an available component from the
            palette. You can select one from the auto completion popup list and you can define
            required attributes in the properties view.</p>
    </div>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.multiviews"></a>Html Dialog with Multiple Views</h3></div></div></div>
    
    <p>To implement a user interaction that consists of several pages (for example a wizard), one
        Html Dialog can be have multiple views (.xhtml files). This allows to enclose a complex user
        interaction in one Html Dialog and to abstract it from the business process.</p>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N271B2"></a>How to add a view</h4></div></div></div>
        
        <p>In the <span class="command"><strong>New</strong></span> menu in the Xpert.ivy project tree you find the
                <span class="command"><strong>New Html Dialog View</strong></span> wizard to add a view to a Html Dialog. Just
            enter the name of the view and the xhtml file for the view is created and added to the
            Html Dialog. In the ivy project tree all view files of a Html Dialog are displayed below
            the main node of that Html Dialog. </p>
        <div class="mediaobject"><img src="images/HtmlDialogs/htmldialog_newviewwizard.png"></div>
    </div>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="N271CA"></a>How to switch views during runtime</h4></div></div></div>
        
        <p>If you have created a Html Dialog with several views you have to implement the
            navigation between the views for the user on your own. The basic solution is a
                <code class="code">commandButton</code> with an <code class="code">update</code> attribute to load the next
            view.</p>
        <p> You find an example of a multi view Html Dialog in the HtmlDialogDemos project that
            is provided with the Xpert.ivy Designer. </p>
        <pre class="screen">
&lt;h:form id="myForm"&gt;
    &lt;p:panel header="Multi View Demo" id="panel"&gt;
    &lt;h3&gt;Payment - Credit Card&lt;/h3&gt;
    &lt;p:messages id="msgs"/&gt;
    &lt;h:panelGrid columns="2"&gt;
        &lt;p:outputLabel value="Credit Card Number"/&gt;
        &lt;p:inputMask required="true" value="#{data.creditCardNumber}" 
            id="CreditCardNumber" mask="9999-9999-9999-9999"&gt;&lt;/p:inputMask&gt;
    &lt;/h:panelGrid&gt;           
    &lt;p:commandButton value="Next" update="myForm" action="#{logic.nextView('CreditCard')}"/&gt;
    &lt;/p:panel&gt;
&lt;/h:form&gt;      
</pre>
    </div>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.Converters"></a>Converters</h3></div></div></div>
    
    <p>Converters are used to convert number or date/time values for string represnetation and
        vice versa. If you want to display a <code class="code">Number</code> or
            <code class="code">Date</code>/<code class="code">DateTime</code> process data attribute well formated in an input
        widget then use the basic converters provided by the JSF core framework: <span class="bold"><strong>convertNumber</strong></span> and <span class="bold"><strong>convertDateTime</strong></span>.</p>
    <p>See this code fragment from an input form:</p>
    <pre class="screen">
&lt;p:calendar id="Birthday" value="#{data.birthday}" navigator="true" 
        required="true" pattern="dd.MM.yyyy"&gt;
    &lt;f:convertDateTime pattern="dd.MM.yyyy" /&gt;
&lt;/p:calendar&gt;            
    </pre>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ivy.htmldialogs.CustomeFacesConvertes"></a>Custom Faces Converters</h4></div></div></div>
        
        <p>Custom Faces Converters can be implemented as a Java class with a specific
                <code class="code">FacesConverter</code> annotation and then be used in your Xpert.ivy project. </p>
        <p>Example:</p>
        <pre class="screen">
    @FacesConverter("MyCustomFacesConverter")
    public class MyCustomFacesConverter implements Converter            
        </pre>
    </div>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.Validators"></a>Validators</h3></div></div></div>
    
    <p>The JSF core framework provides a number of basic validators that can be used to validate
        the entered values in an input form.</p>
    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
            <p>validateDoubleRange</p>
        </li><li class="listitem">
            <p>validateLength</p>
        </li><li class="listitem">
            <p>validateLongRange</p>
        </li><li class="listitem">
            <p>validateRegex</p>
        </li><li class="listitem">
            <p>validateRequired</p>
        </li></ul></div>
    <p>Example code fragment from an input form:</p>
    <pre class="screen">
            &lt;p:inputText value="#{data.zipCode}" id="ZipCode" required="true"&gt;
                &lt;f:convertNumber integerOnly="true" groupingUsed="false"/&gt;
                &lt;f:validateLength minimum="4" maximum="5"/&gt;
            &lt;/p:inputText&gt;     
        </pre>
</div>
    <div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="ivy.htmldialogs.managedbeans"></a>Managed Beans</h3></div></div></div>
    
    <p>In Html Dialogs it is possible to communicate with normal Java objects by using
            <span class="emphasis"><em>ManagedBeans</em></span>. Use the following annotations to define the lifecycle
        scope of the managed bean:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>@ApplicationScoped - the bean instance is created at creation of the
                    application or at the server startup and destroyed when the application is
                    either deleted or the server shuts down. </p>
            </li><li class="listitem">
                <p>@SessionScoped - the bean lives for the whole duration of the session</p>
            </li><li class="listitem">
                <p>@RequestScoped - an instance of the bean is created for each new request and
                    thrown away after the response has been sent. This is the default scope that
                    will be used when no scope is set specifically.</p>
            </li></ul></div><p>

                </p>
    <p>In the HtmlDialogDemo Project that is included in the Xpert.ivy Designer you find an
        example. </p>
    <div class="sect3"><div class="titlepage"><div><div><h4 class="title"><a name="ivy.htmldialogs.managedbeansvalidation"></a>Bean Validation (JSR 303)</h4></div></div></div>
        
        <p>The <span class="emphasis"><em>JSR 303</em></span> is a specification that defines a metadata model for
            Bean Validation. The fields of the JavaBean classes that are used for storing the data
            are annotated to describe the constraints and their validation. Experienced programmers
            can use JSR 303 annotations in Xpert.ivy projects. The validation information will then
            be considered by Html Dialogs when the field of the class is bound to a widget. There is
            no validation information given in the *.xhtml file of the Html Dialog itself. However,
            the Html Dialog uses the annotations of the fields to validate the user input. </p>
        <p>All annotations defined in the package javax.validation.constraints are supported. For
            the validation messages you can use Ivy macros to get the message content from the <a class="link" href="ch08.html" title="Chapter&nbsp;8.&nbsp;Content Management">CMS</a>. For example:</p>
        <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                <p>@NotNull "means that a value is required"</p>
            </li><li class="listitem">
                <p>@Size "restricts the length of a string or array or the size of a collection
                    or map"</p>
            </li><li class="listitem">
                <p>@Max "restricts the maximum allowed value"</p>
            </li><li class="listitem">
                <p>@Min "restricts the minimum allowed value" </p>
            </li><li class="listitem">
                <p>@Pattern "restricts a string to a given regular expression" </p>
            </li><li class="listitem">
                <p>@Digits "restricts the maximum number of digits of the integer and faction
                    part" </p>
            </li><li class="listitem">
                <p>@Future "restricts a date to the dates in the future" </p>
            </li><li class="listitem">
                <p>@Past "restricts a date to the dates in the past" </p>
            </li></ul></div>
        <p>
            </p><pre class="programlisting">@SessionScoped 
public class Person 
{
	@Size(min=3, max=10, message="&lt;%=ivy.cms.co(\"/ch.ivyteam.htmldialog.demo/BeanValidationDemo/between3And10Characters\")%&gt;")
	@NotNull(message="&lt;%=ivy.cms.co(\"/ch.ivyteam.htmldialog.demo/BeanValidationDemo/notnull\")%&gt;")
	private String name;
	
	@Pattern(regexp="[1-9][0-9]{2}\\.[0-9]{2}\\.[1-8]([0-8][0-9]|9[012])\\.[0-9]{3}", message="&lt;%=ivy.cms.co(\"/ch.ivyteam.htmldialog.demo/BeanValidationDemo/socialSecurityNumber\")%&gt;")
	@NotNull(message="&lt;%=ivy.cms.co(\"/ch.ivyteam.htmldialog.demo/BeanValidationDemo/notnull\")%&gt;")
	private String socialSecurityNumber;</pre><p>
        </p>
        <p>There will always be validation requirements for which these standard annotation will
            not suffice. For these cases it is possible to create your own annotation. You find an
            example in the HtmlDialogDemo project that is included in the Xpert.ivy
            Designer.</p>
        <p>
            </p><pre class="programlisting">public class Person 
{
	@LicensePlate(message="&lt;%=ivy.cms.co(\"/ch.ivyteam.htmldialog.demo/BeanValidationDemo/licensePlate\")%&gt;")
	private String vehicleLicense;</pre><p>
            </p><pre class="programlisting">// re-use other existing constraints:
@NotNull
@Size(min=4, max=20)
@UpperCase // custom constraint in same package
@StartsWith(prefix="ZG") // custom constraint in same package

//only show the validation message from this annotation and not from it's re-used types:
@ReportAsSingleViolation 

@Target( { METHOD, FIELD, ANNOTATION_TYPE })
@Retention(RUNTIME)
@Constraint(validatedBy = {})
@Documented
public @interface LicensePlate {
    String message() default "Field does not contain a valid license plate";
    Class&lt;?&gt;[] groups() default {};
    public abstract Class&lt;? extends Payload&gt;[] payload() default {};
}</pre><p>
        </p>
    </div>
</div>
</div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="ch09.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="ch09.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ch09s03.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">Chapter&nbsp;9.&nbsp;User Dialogs&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Rich Dialogs</td></tr></table></div></body></html>